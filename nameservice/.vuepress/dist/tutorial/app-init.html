<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Start your application</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.0fa35ecc.css" as="style"><link rel="preload" href="/assets/js/app.358745d0.js" as="script"><link rel="preload" href="/assets/js/10.ed56b2dd.js" as="script"><link rel="prefetch" href="/assets/js/11.b9448339.js"><link rel="prefetch" href="/assets/js/12.d9540af2.js"><link rel="prefetch" href="/assets/js/13.8738af6e.js"><link rel="prefetch" href="/assets/js/14.7ef7ba9a.js"><link rel="prefetch" href="/assets/js/15.01af3069.js"><link rel="prefetch" href="/assets/js/16.5f272536.js"><link rel="prefetch" href="/assets/js/17.950b1488.js"><link rel="prefetch" href="/assets/js/18.97cd0ce2.js"><link rel="prefetch" href="/assets/js/19.c15b4c92.js"><link rel="prefetch" href="/assets/js/2.7459dab1.js"><link rel="prefetch" href="/assets/js/20.46ad9e71.js"><link rel="prefetch" href="/assets/js/21.1aaf8749.js"><link rel="prefetch" href="/assets/js/22.ed2cbdbe.js"><link rel="prefetch" href="/assets/js/23.d29efe89.js"><link rel="prefetch" href="/assets/js/24.6efbd344.js"><link rel="prefetch" href="/assets/js/25.99eafa78.js"><link rel="prefetch" href="/assets/js/26.59c51545.js"><link rel="prefetch" href="/assets/js/27.09db857f.js"><link rel="prefetch" href="/assets/js/28.de9e6f97.js"><link rel="prefetch" href="/assets/js/29.a95ec837.js"><link rel="prefetch" href="/assets/js/3.3b8bb6a2.js"><link rel="prefetch" href="/assets/js/30.ec4f2e27.js"><link rel="prefetch" href="/assets/js/31.39335b08.js"><link rel="prefetch" href="/assets/js/32.5e4a40ba.js"><link rel="prefetch" href="/assets/js/33.2d12c22c.js"><link rel="prefetch" href="/assets/js/34.6a06e4fa.js"><link rel="prefetch" href="/assets/js/35.37ad73ec.js"><link rel="prefetch" href="/assets/js/36.c90ef3a4.js"><link rel="prefetch" href="/assets/js/37.fcf1b3b5.js"><link rel="prefetch" href="/assets/js/38.549dbd91.js"><link rel="prefetch" href="/assets/js/39.c25f4a9a.js"><link rel="prefetch" href="/assets/js/4.ff53f1d1.js"><link rel="prefetch" href="/assets/js/40.29b6dbc5.js"><link rel="prefetch" href="/assets/js/41.003066df.js"><link rel="prefetch" href="/assets/js/42.59cc5a5a.js"><link rel="prefetch" href="/assets/js/43.5877f03f.js"><link rel="prefetch" href="/assets/js/44.97ed4d02.js"><link rel="prefetch" href="/assets/js/45.2be01aab.js"><link rel="prefetch" href="/assets/js/5.d936167e.js"><link rel="prefetch" href="/assets/js/6.f824f7e2.js"><link rel="prefetch" href="/assets/js/7.e6534aea.js"><link rel="prefetch" href="/assets/js/8.1b43487c.js"><link rel="prefetch" href="/assets/js/9.a7040e01.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0fa35ecc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="start-your-application"><a href="#start-your-application" aria-hidden="true" class="header-anchor">#</a> Start your application</h1> <p>Get started by creating a new file: <code>./app.go</code>. This file is the heart of your deterministic state-machine (blockchain). <code>app.go</code> is where the different modules are initialized and configured into a complete application using the <code>sdk.ModuleBasicManager</code>.</p> <p>In <code>app.go</code>, you define what the application does when it receives a transaction. But first, it needs to be able to receive transactions in the correct order. This is the role of the <a href="https://github.com/tendermint/tendermint" target="_blank" rel="noopener noreferrer">Tendermint consensus engine<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Start by importing the necessary dependencies:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> app

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;encoding/json&quot;</span>
	<span class="token string">&quot;os&quot;</span>

	<span class="token string">&quot;github.com/tendermint/tendermint/libs/log&quot;</span>

	<span class="token string">&quot;github.com/cosmos/cosmos-sdk/codec&quot;</span>
	<span class="token string">&quot;github.com/cosmos/cosmos-sdk/x/auth&quot;</span>

	<span class="token string">&quot;github.com/cosmos/cosmos-sdk/x/auth/genaccounts&quot;</span>

	<span class="token string">&quot;github.com/cosmos/cosmos-sdk/x/bank&quot;</span>
	distr <span class="token string">&quot;github.com/cosmos/cosmos-sdk/x/distribution&quot;</span>
	<span class="token string">&quot;github.com/cosmos/cosmos-sdk/x/params&quot;</span>
	<span class="token string">&quot;github.com/cosmos/cosmos-sdk/x/staking&quot;</span>
	<span class="token string">&quot;github.com/cosmos/sdk-application-tutorial/x/nameservice&quot;</span>

	bam <span class="token string">&quot;github.com/cosmos/cosmos-sdk/baseapp&quot;</span>
	sdk <span class="token string">&quot;github.com/cosmos/cosmos-sdk/types&quot;</span>
	abci <span class="token string">&quot;github.com/tendermint/tendermint/abci/types&quot;</span>
	cmn <span class="token string">&quot;github.com/tendermint/tendermint/libs/common&quot;</span>
	dbm <span class="token string">&quot;github.com/tendermint/tendermint/libs/db&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Links to godocs for each module and package imported:</p> <ul><li><a href="https://godoc.org/github.com/tendermint/tendermint/libs/log" target="_blank" rel="noopener noreferrer"><code>log</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: Tendermint's logger.</li> <li><a href="https://godoc.org/github.com/cosmos/cosmos-sdk/x/auth" target="_blank" rel="noopener noreferrer"><code>auth</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: The <code>auth</code> module for the Comsos SDK.</li> <li><a href="https://godoc.org/github.com/tendermint/tendermint/libs/db" target="_blank" rel="noopener noreferrer"><code>dbm</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: Code for working with the Tendermint database.</li> <li><a href="https://godoc.org/github.com/cosmos/cosmos-sdk/baseapp" target="_blank" rel="noopener noreferrer"><code>baseapp</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: See below</li></ul> <p>A couple of the packages here are <code>tendermint</code> packages. Tendermint passes transactions from the network to the application through an interface called the <a href="https://github.com/tendermint/tendermint/tree/master/abci" target="_blank" rel="noopener noreferrer">ABCI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. If you look at the architecture of the blockchain node you are building, it looks like the following:</p> <div class="language- extra-class"><pre class="language-text"><code>+---------------------+
|                     |
|     Application     |
|                     |
+--------+---+--------+
         ^   |
         |   | ABCI
         |   v
+--------+---+--------+
|                     |
|                     |
|     Tendermint      |
|                     |
|                     |
+---------------------+
</code></pre></div><p>Fortunately, you do not have to implement the ABCI interface. The Cosmos SDK provides a boilerplate implementation of it in the form of <a href="https://godoc.org/github.com/cosmos/cosmos-sdk/baseapp" target="_blank" rel="noopener noreferrer"><code>baseapp</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Here is what <code>baseapp</code> does:</p> <ul><li>Decode transactions received from the Tendermint consensus engine.</li> <li>Extract messages from transactions and do basic sanity checks.</li> <li>Route the message to the appropriate module so that it can be processed. Note that <code>baseapp</code> has no knowledge of the specific modules you want to use. It is your job to declare such modules in <code>app.go</code>, as you will see later in this tutorial. <code>baseapp</code> only implements the core routing logic that can be applied to any module.</li> <li>Commit if the ABCI message is <a href="https://tendermint.com/docs/spec/abci/abci.html#delivertx" target="_blank" rel="noopener noreferrer"><code>DeliverTx</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (<a href="https://tendermint.com/docs/spec/abci/abci.html#checktx" target="_blank" rel="noopener noreferrer"><code>CheckTx</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> changes are not persistent).</li> <li>Help set up <a href="https://tendermint.com/docs/spec/abci/abci.html#beginblock" target="_blank" rel="noopener noreferrer"><code>Beginblock</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://tendermint.com/docs/spec/abci/abci.html#endblock" target="_blank" rel="noopener noreferrer"><code>Endblock</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, two messages that enable you to define logic executed at the beginning and end of each block. In practice, each module implements its own <code>BeginBlock</code> and <code>EndBlock</code> sub-logic, and the role of the app is to aggregate everything together (<em>Note: you won't be using these messages in your application</em>).</li> <li>Help initialise your state.</li> <li>Help set up queries.</li></ul> <p>Now you need to create a new custom type <code>nameServiceApp</code> for your application. This type will embed <code>baseapp</code> (embedding in Go similar to inheritance in other languages), meaning it will have access to all of <code>baseapp</code>'s methods.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">const</span> appName <span class="token operator">=</span> <span class="token string">&quot;nameservice&quot;</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	<span class="token comment">// default home directories for the application CLI</span>
	DefaultCLIHome <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">ExpandEnv</span><span class="token punctuation">(</span><span class="token string">&quot;$HOME/.nscli&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// DefaultNodeHome sets the folder where the application data and configuration will be stored</span>
	DefaultNodeHome <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">ExpandEnv</span><span class="token punctuation">(</span><span class="token string">&quot;$HOME/.nsd&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// ModuleBasicManager is in charge of setting up basic module elements</span>
	ModuleBasics sdk<span class="token punctuation">.</span>ModuleBasicManager
<span class="token punctuation">)</span>

<span class="token keyword">type</span> nameServiceApp <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span>bam<span class="token punctuation">.</span>BaseApp
<span class="token punctuation">}</span>
</code></pre></div><p>Add a simple constructor for your application:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">NewNameServiceApp</span><span class="token punctuation">(</span>logger log<span class="token punctuation">.</span>Logger<span class="token punctuation">,</span> db dbm<span class="token punctuation">.</span>DB<span class="token punctuation">)</span> <span class="token operator">*</span>nameServiceApp <span class="token punctuation">{</span>

    <span class="token comment">// First define the top level codec that will be shared by the different modules. Note: Codec will be explained later</span>
    cdc <span class="token operator">:=</span> <span class="token function">MakeCodec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// BaseApp handles interactions with Tendermint through the ABCI protocol</span>
    bApp <span class="token operator">:=</span> bam<span class="token punctuation">.</span><span class="token function">NewBaseApp</span><span class="token punctuation">(</span>appName<span class="token punctuation">,</span> logger<span class="token punctuation">,</span> db<span class="token punctuation">,</span> auth<span class="token punctuation">.</span><span class="token function">DefaultTxDecoder</span><span class="token punctuation">(</span>cdc<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token operator">&amp;</span>nameServiceApp<span class="token punctuation">{</span>
        BaseApp<span class="token punctuation">:</span> bApp<span class="token punctuation">,</span>
        cdc<span class="token punctuation">:</span>     cdc<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> app
<span class="token punctuation">}</span>
</code></pre></div><p>Great! You now have the skeleton of your application; however, it still lacks functionality.</p> <p><code>baseapp</code> has no knowledge of the routes or user interactions you want to use in your application. The primary role of your application is to define these routes. Another role is to define the initial state. Both these things require that you add modules to your application.</p> <p>As you have seen in the <a href="/tutorial/app-design.html">application design</a> section, you need a couple modules for your nameservice: <code>auth</code>, <code>bank</code>, <code>staking</code>, <code>distribution</code>, <code>slashing</code> and <code>nameservice</code>. The first two already exist, but not the last! The <code>nameservice</code> module will define the bulk of your state machine. The next step is to build it.</p> <h3 id="in-order-to-complete-your-application-you-need-to-include-modules-go-ahead-and-start-building-your-nameservice-module-you-will-come-back-to-app-go-later"><a href="#in-order-to-complete-your-application-you-need-to-include-modules-go-ahead-and-start-building-your-nameservice-module-you-will-come-back-to-app-go-later" aria-hidden="true" class="header-anchor">#</a> In order to complete your application, you need to include modules. Go ahead and <a href="/tutorial/types.html">start building your nameservice module</a>. You will come back to <code>app.go</code> later.</h3></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.358745d0.js" defer></script><script src="/assets/js/10.ed56b2dd.js" defer></script>
  </body>
</html>
