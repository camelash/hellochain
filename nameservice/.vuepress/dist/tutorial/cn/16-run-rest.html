<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>运行 REST 路由</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.0fa35ecc.css" as="style"><link rel="preload" href="/assets/js/app.358745d0.js" as="script"><link rel="preload" href="/assets/js/29.a95ec837.js" as="script"><link rel="prefetch" href="/assets/js/10.ed56b2dd.js"><link rel="prefetch" href="/assets/js/11.b9448339.js"><link rel="prefetch" href="/assets/js/12.d9540af2.js"><link rel="prefetch" href="/assets/js/13.8738af6e.js"><link rel="prefetch" href="/assets/js/14.7ef7ba9a.js"><link rel="prefetch" href="/assets/js/15.01af3069.js"><link rel="prefetch" href="/assets/js/16.5f272536.js"><link rel="prefetch" href="/assets/js/17.950b1488.js"><link rel="prefetch" href="/assets/js/18.97cd0ce2.js"><link rel="prefetch" href="/assets/js/19.c15b4c92.js"><link rel="prefetch" href="/assets/js/2.7459dab1.js"><link rel="prefetch" href="/assets/js/20.46ad9e71.js"><link rel="prefetch" href="/assets/js/21.1aaf8749.js"><link rel="prefetch" href="/assets/js/22.ed2cbdbe.js"><link rel="prefetch" href="/assets/js/23.d29efe89.js"><link rel="prefetch" href="/assets/js/24.6efbd344.js"><link rel="prefetch" href="/assets/js/25.99eafa78.js"><link rel="prefetch" href="/assets/js/26.59c51545.js"><link rel="prefetch" href="/assets/js/27.09db857f.js"><link rel="prefetch" href="/assets/js/28.de9e6f97.js"><link rel="prefetch" href="/assets/js/3.3b8bb6a2.js"><link rel="prefetch" href="/assets/js/30.ec4f2e27.js"><link rel="prefetch" href="/assets/js/31.39335b08.js"><link rel="prefetch" href="/assets/js/32.5e4a40ba.js"><link rel="prefetch" href="/assets/js/33.2d12c22c.js"><link rel="prefetch" href="/assets/js/34.6a06e4fa.js"><link rel="prefetch" href="/assets/js/35.37ad73ec.js"><link rel="prefetch" href="/assets/js/36.c90ef3a4.js"><link rel="prefetch" href="/assets/js/37.fcf1b3b5.js"><link rel="prefetch" href="/assets/js/38.549dbd91.js"><link rel="prefetch" href="/assets/js/39.c25f4a9a.js"><link rel="prefetch" href="/assets/js/4.ff53f1d1.js"><link rel="prefetch" href="/assets/js/40.29b6dbc5.js"><link rel="prefetch" href="/assets/js/41.003066df.js"><link rel="prefetch" href="/assets/js/42.59cc5a5a.js"><link rel="prefetch" href="/assets/js/43.5877f03f.js"><link rel="prefetch" href="/assets/js/44.97ed4d02.js"><link rel="prefetch" href="/assets/js/45.2be01aab.js"><link rel="prefetch" href="/assets/js/5.d936167e.js"><link rel="prefetch" href="/assets/js/6.f824f7e2.js"><link rel="prefetch" href="/assets/js/7.e6534aea.js"><link rel="prefetch" href="/assets/js/8.1b43487c.js"><link rel="prefetch" href="/assets/js/9.a7040e01.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0fa35ecc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="运行-rest-路由"><a href="#运行-rest-路由" aria-hidden="true" class="header-anchor">#</a> 运行 REST 路由</h1> <p>现在不已经测试了CLI的查询操作和交易操作，是时候在REST服务器中进行相同测试了。保留先前运行的<code>nsd</code>，然后先收集地址：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ nscli keys show jack --address
$ nscli keys show alice --address
</code></pre></div><p>在另一个终端窗口运行<code>rest-server</code>：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ nscli rest-server --chain-id namechain --trust-node
</code></pre></div><p>然后，你可以构造并运行以下查询：</p> <blockquote><p>注意：请务必将你的密码和 buyer/owner 地址替换为下面列出的地址！</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Get the sequence and account numbers for jack to construct the below requests</span>
$ <span class="token function">curl</span> -s http://localhost:1317/auth/accounts/<span class="token variable"><span class="token variable">$(</span>nscli keys show jack -a<span class="token variable">)</span></span>
<span class="token comment"># &gt; {&quot;type&quot;:&quot;auth/Account&quot;,&quot;value&quot;:{&quot;address&quot;:&quot;cosmos127qa40nmq56hu27ae263zvfk3ey0tkapwk0gq6&quot;,&quot;coins&quot;:[{&quot;denom&quot;:&quot;jackCoin&quot;,&quot;amount&quot;:&quot;1000&quot;},{&quot;denom&quot;:&quot;nametoken&quot;,&quot;amount&quot;:&quot;1010&quot;}],&quot;public_key&quot;:{&quot;type&quot;:&quot;tendermint/PubKeySecp256k1&quot;,&quot;value&quot;:&quot;A9YxyEbSWzLr+IdK/PuMUYmYToKYQ3P/pM8SI1Bxx3wu&quot;},&quot;account_number&quot;:&quot;0&quot;,&quot;sequence&quot;:&quot;1&quot;}}</span>

<span class="token comment"># Get the sequence and account numbers for alice to construct the below requests</span>
$ <span class="token function">curl</span> -s http://localhost:1317/auth/accounts/<span class="token variable"><span class="token variable">$(</span>nscli keys show alice -a<span class="token variable">)</span></span>
<span class="token comment"># &gt; {&quot;type&quot;:&quot;auth/Account&quot;,&quot;value&quot;:{&quot;address&quot;:&quot;cosmos1h7ztnf2zkf4558hdxv5kpemdrg3tf94hnpvgsl&quot;,&quot;coins&quot;:[{&quot;denom&quot;:&quot;aliceCoin&quot;,&quot;amount&quot;:&quot;1000&quot;},{&quot;denom&quot;:&quot;nametoken&quot;,&quot;amount&quot;:&quot;980&quot;}],&quot;public_key&quot;:{&quot;type&quot;:&quot;tendermint/PubKeySecp256k1&quot;,&quot;value&quot;:&quot;Avc7qwecLHz5qb1EKDuSTLJfVOjBQezk0KSPDNybLONJ&quot;},&quot;account_number&quot;:&quot;1&quot;,&quot;sequence&quot;:&quot;1&quot;}}</span>

<span class="token comment"># Buy another name for jack</span>
<span class="token comment"># NOTE: Be sure to specialize this request for your specific environment, also the &quot;buyer&quot; and &quot;from&quot; should be the same address</span>
$ <span class="token function">curl</span> -XPOST -s http://localhost:1317/nameservice/names --data-binary <span class="token string">'{&quot;base_req&quot;:{&quot;from&quot;:&quot;jack&quot;,&quot;password&quot;:&quot;foobarbaz&quot;,&quot;chain_id&quot;:&quot;namechain&quot;,&quot;sequence&quot;:&quot;2&quot;,&quot;account_number&quot;:&quot;0&quot;},&quot;name&quot;:&quot;jack1.id&quot;,&quot;amount&quot;:&quot;5nametoken&quot;,&quot;buyer&quot;:&quot;cosmos127qa40nmq56hu27ae263zvfk3ey0tkapwk0gq6&quot;}'</span>
<span class="token comment"># &gt; {&quot;check_tx&quot;:{&quot;gasWanted&quot;:&quot;200000&quot;,&quot;gasUsed&quot;:&quot;1242&quot;},&quot;deliver_tx&quot;:{&quot;log&quot;:&quot;Msg 0: &quot;,&quot;gasWanted&quot;:&quot;200000&quot;,&quot;gasUsed&quot;:&quot;2986&quot;,&quot;tags&quot;:[{&quot;key&quot;:&quot;YWN0aW9u&quot;,&quot;value&quot;:&quot;YnV5X25hbWU=&quot;}]},&quot;hash&quot;:&quot;098996CD7ED4323561AC9011DEA24C70C8FAED2A4A10BC8DE2CE35C1977C3B7A&quot;,&quot;height&quot;:&quot;23&quot;}</span>

<span class="token comment"># Set the data for that name that jack just bought</span>
<span class="token comment"># NOTE: Be sure to specialize this request for your specific environment, also the &quot;owner&quot; and &quot;from&quot; should be the same address</span>
$ <span class="token function">curl</span> -XPUT -s http://localhost:1317/nameservice/names --data-binary <span class="token string">'{&quot;base_req&quot;:{&quot;from&quot;:&quot;jack&quot;,&quot;password&quot;:&quot;foobarbaz&quot;,&quot;chain_id&quot;:&quot;namechain&quot;,&quot;sequence&quot;:&quot;3&quot;,&quot;account_number&quot;:&quot;0&quot;},&quot;name&quot;:&quot;jack1.id&quot;,&quot;value&quot;:&quot;8.8.4.4&quot;,&quot;owner&quot;:&quot;cosmos127qa40nmq56hu27ae263zvfk3ey0tkapwk0gq6&quot;}'</span>
<span class="token comment"># &gt; {&quot;check_tx&quot;:{&quot;gasWanted&quot;:&quot;200000&quot;,&quot;gasUsed&quot;:&quot;1242&quot;},&quot;deliver_tx&quot;:{&quot;log&quot;:&quot;Msg 0: &quot;,&quot;gasWanted&quot;:&quot;200000&quot;,&quot;gasUsed&quot;:&quot;1352&quot;,&quot;tags&quot;:[{&quot;key&quot;:&quot;YWN0aW9u&quot;,&quot;value&quot;:&quot;c2V0X25hbWU=&quot;}]},&quot;hash&quot;:&quot;B4DF0105D57380D60524664A2E818428321A0DCA1B6B2F091FB3BEC54D68FAD7&quot;,&quot;height&quot;:&quot;26&quot;}</span>

<span class="token comment"># Query the value for the name jack just set</span>
$ <span class="token function">curl</span> -s http://localhost:1317/nameservice/names/jack1.id
<span class="token comment"># 8.8.4.4</span>

<span class="token comment"># Query whois for the name jack just bought</span>
$ <span class="token function">curl</span> -s http://localhost:1317/nameservice/names/jack1.id/whois
<span class="token comment"># &gt; {&quot;value&quot;:&quot;8.8.8.8&quot;,&quot;owner&quot;:&quot;cosmos127qa40nmq56hu27ae263zvfk3ey0tkapwk0gq6&quot;,&quot;price&quot;:[{&quot;denom&quot;:&quot;STAKE&quot;,&quot;amount&quot;:&quot;10&quot;}]}</span>

<span class="token comment"># Alice buys name from jack</span>
$ <span class="token function">curl</span> -XPOST -s http://localhost:1317/nameservice/names --data-binary <span class="token string">'{&quot;base_req&quot;:{&quot;from&quot;:&quot;alice&quot;,&quot;password&quot;:&quot;foobarbaz&quot;,&quot;chain_id&quot;:&quot;namechain&quot;,&quot;sequence&quot;:&quot;1&quot;,&quot;account_number&quot;:&quot;1&quot;},&quot;name&quot;:&quot;jack1.id&quot;,&quot;amount&quot;:&quot;10nametoken&quot;,&quot;buyer&quot;:&quot;cosmos1h7ztnf2zkf4558hdxv5kpemdrg3tf94hnpvgsl&quot;}'</span>
<span class="token comment"># &gt; {&quot;check_tx&quot;:{&quot;gasWanted&quot;:&quot;200000&quot;,&quot;gasUsed&quot;:&quot;1264&quot;},&quot;deliver_tx&quot;:{&quot;log&quot;:&quot;Msg 0: &quot;,&quot;gasWanted&quot;:&quot;200000&quot;,&quot;gasUsed&quot;:&quot;4509&quot;,&quot;tags&quot;:[{&quot;key&quot;:&quot;YWN0aW9u&quot;,&quot;value&quot;:&quot;YnV5X25hbWU=&quot;}]},&quot;hash&quot;:&quot;81A371392B52F703266257D524538085F8C749EE3CBC1C579873632EFBAFA40C&quot;,&quot;height&quot;:&quot;70&quot;}</span>
</code></pre></div><h3 id="请求概要："><a href="#请求概要：" aria-hidden="true" class="header-anchor">#</a> 请求概要：</h3> <p><code>POST /nameservice/names</code> BuyName请求体：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;base_req&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;chain_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sequence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;account_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;gas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string,not_req&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;gas_adjustment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string,not_req&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;buyer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>PUT /nameservice/names</code> SetName请求体：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;base_req&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;chain_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sequence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;account_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;gas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string,not_req&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;gas_adjustment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;strin,not_reqg&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="回到教程起开头"><a href="#回到教程起开头" aria-hidden="true" class="header-anchor">#</a> <a href="/tutorial/cn/" class="router-link-active">回到教程起开头</a></h3></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.358745d0.js" defer></script><script src="/assets/js/29.a95ec837.js" defer></script>
  </body>
</html>
